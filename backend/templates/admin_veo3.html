<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rudnex Digital - Veo 3 Style Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="glass-effect rounded-2xl p-6 mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-2">
                        <i class="fas fa-magic mr-3"></i>
                        Rudnex Digital Admin
                    </h1>
                    <p class="text-gray-200">Veo 3 Style Content Generation Hub</p>
                </div>
                <div class="text-right">
                    <div class="text-white text-sm">
                        <div>Status: <span class="text-green-400">Online</span></div>
                        <div>API: <span class="text-blue-400">v1.0.0</span></div>
                    </div>
                    <form method="POST" action="/api/admin/logout" class="mt-3 inline-block">
                        <button class="bg-white/10 border border-white/20 text-white px-3 py-2 rounded-lg hover:bg-white/20">Logout</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Video Generation Panel -->
            <div class="lg:col-span-2">
                <div class="glass-effect rounded-2xl p-6">
                    <h2 class="text-2xl font-bold text-white mb-6">
                        <i class="fas fa-video mr-3"></i>
                        AI Video Generation
                    </h2>
                    
                    <!-- Generation Form -->
                    <form @submit.prevent="generateVideo" class="space-y-6">
                        <div>
                            <label class="block text-white text-sm font-medium mb-2">Prompt</label>
                            <textarea 
                                v-model="videoForm.prompt" 
                                class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400"
                                placeholder="Describe the video you want to generate..."
                                rows="3"
                            ></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Duration (seconds)</label>
                                <input 
                                    v-model="videoForm.duration" 
                                    type="number" 
                                    min="5" 
                                    max="300"
                                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                >
                            </div>
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Style</label>
                                <select 
                                    v-model="videoForm.style"
                                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                >
                                    <option value="realistic">Realistic</option>
                                    <option value="cartoon">Cartoon</option>
                                    <option value="artistic">Artistic</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Resolution</label>
                                <select 
                                    v-model="videoForm.resolution"
                                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                >
                                    <option value="720p">720p</option>
                                    <option value="1080p">1080p</option>
                                    <option value="1440p">1440p</option>
                                    <option value="4k">4K</option>
                                </select>
                            </div>
                        </div>
                        
                        <button 
                            type="submit" 
                            :disabled="generating"
                            class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                            <i v-if="generating" class="fas fa-spinner fa-spin mr-2"></i>
                            <i v-else class="fas fa-magic mr-2"></i>
                            {{ generating ? 'Generating Video...' : 'Generate Video' }}
                        </button>
                    </form>
                    
                    <!-- Generation Progress -->
                    <div v-if="generating" class="mt-6">
                        <div class="bg-white/10 rounded-lg p-4">
                            <div class="flex items-center justify-between text-white mb-2">
                                <span>Processing...</span>
                                <span>{{ progress }}%</span>
                            </div>
                            <div class="w-full bg-white/20 rounded-full h-2">
                                <div class="bg-gradient-to-r from-blue-500 to-purple-600 h-2 rounded-full transition-all duration-300" :style="{ width: progress + '%' }"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Generated Video Preview -->
                    <div v-if="generatedVideo" class="mt-6">
                        <h3 class="text-xl font-bold text-white mb-4">Generated Content</h3>
                        <div class="bg-white/10 rounded-lg p-4">
                            <video v-if="generatedVideo.video_url" controls class="w-full rounded-lg mb-4">
                                <source :src="generatedVideo.video_url" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                            <div class="text-white">
                                <p><strong>Duration:</strong> {{ generatedVideo.duration }}s</p>
                                <p><strong>Prompt:</strong> {{ generatedVideo.prompt }}</p>
                                <a :href="generatedVideo.video_url" download class="inline-block bg-green-500 text-white px-4 py-2 rounded-lg mt-2 hover:bg-green-600 transition-colors">
                                    <i class="fas fa-download mr-2"></i>Download Video
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Analytics & Controls -->
            <div class="space-y-6">
                <!-- Quick Stats -->
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">
                        <i class="fas fa-chart-bar mr-2"></i>
                        Analytics
                    </h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">Contact Forms</span>
                            <span class="text-white font-bold">{{ analytics.contact_submissions || 0 }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">Chat Sessions</span>
                            <span class="text-white font-bold">{{ analytics.chat_conversations || 0 }}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">Videos Generated</span>
                            <span class="text-white font-bold">{{ analytics.successful_generations || 0 }}</span>
                        </div>
                    </div>
                </div>
                
                <!-- Audio Generation -->
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">
                        <i class="fas fa-microphone mr-2"></i>
                        Audio Generation
                    </h3>
                    <form @submit.prevent="generateAudio" class="space-y-4">
                        <div>
                            <label class="block text-white text-sm font-medium mb-2">Text to Speech</label>
                            <textarea 
                                v-model="audioForm.text" 
                                class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400"
                                placeholder="Enter text to convert to speech..."
                                rows="3"
                            ></textarea>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Voice</label>
                                <select 
                                    v-model="audioForm.voice"
                                    class="w-full p-3 rounded-lg bg-white/10 border border-white/20 text-white focus:outline-none focus:ring-2 focus:ring-blue-400"
                                >
                                    <option value="female-1">Female 1</option>
                                    <option value="female-2">Female 2</option>
                                    <option value="male-1">Male 1</option>
                                    <option value="male-2">Male 2</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Speed</label>
                                <input 
                                    v-model="audioForm.speed" 
                                    type="range" 
                                    min="0.5" 
                                    max="2.0" 
                                    step="0.1"
                                    class="w-full"
                                >
                                <span class="text-white text-sm">{{ audioForm.speed }}x</span>
                            </div>
                        </div>
                        <button 
                            type="submit" 
                            :disabled="generatingAudio"
                            class="w-full bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold py-2 px-4 rounded-lg hover:from-green-600 hover:to-teal-700 transition-all duration-300 disabled:opacity-50"
                        >
                            <i v-if="generatingAudio" class="fas fa-spinner fa-spin mr-2"></i>
                            <i v-else class="fas fa-microphone mr-2"></i>
                            Generate Audio
                        </button>
  </form>
                </div>
                
                <!-- System Status -->
                <div class="glass-effect rounded-2xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">
                        <i class="fas fa-server mr-2"></i>
                        System Status
                    </h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">API Server</span>
                            <span class="text-green-400">
                                <i class="fas fa-circle text-xs mr-1"></i>Online
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">Database</span>
                            <span class="text-green-400">
                                <i class="fas fa-circle text-xs mr-1"></i>Connected
                            </span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-200">AI Models</span>
                            <span class="text-yellow-400">
                                <i class="fas fa-circle text-xs mr-1"></i>Ready
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Content Library -->
        <div class="mt-8">
            <div class="glass-effect rounded-2xl p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-white">
                        <i class="fas fa-folder-open mr-3"></i>
                        Content Library
                    </h2>
                    <button @click="loadContentLibrary" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                        <i class="fas fa-sync-alt mr-2"></i>Refresh
                    </button>
                </div>
                
                <div v-if="contentLibrary.length === 0" class="text-center text-gray-300 py-8">
                    <i class="fas fa-folder-open text-4xl mb-4"></i>
                    <p>No content generated yet. Start by creating your first video!</p>
                </div>
                
                <div v-else class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div v-for="item in contentLibrary" :key="item.id" class="bg-white/10 rounded-lg p-4">
                        <div class="text-white">
                            <h4 class="font-bold mb-2">{{ item.prompt.substring(0, 50) }}...</h4>
                            <p class="text-sm text-gray-300 mb-2">{{ item.content_type }}</p>
                            <p class="text-sm text-gray-300 mb-2">Created: {{ new Date(item.created_at).toLocaleDateString() }}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-sm" :class="item.status === 'completed' ? 'text-green-400' : 'text-yellow-400'">
                                    {{ item.status }}
                                </span>
                                <a v-if="item.output_path" :href="item.output_path" class="text-blue-400 hover:text-blue-300">
                                    <i class="fas fa-download"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    videoForm: {
                        prompt: '',
                        duration: 30,
                        style: 'realistic',
                        resolution: '1080p',
                        audio_settings: {}
                    },
                    audioForm: {
                        text: '',
                        voice: 'female-1',
                        speed: 1.0,
                        pitch: 1.0
                    },
                    generating: false,
                    generatingAudio: false,
                    progress: 0,
                    generatedVideo: null,
                    analytics: {},
                    contentLibrary: []
                }
            },
            mounted() {
                axios.defaults.withCredentials = true;
                this.loadAnalytics();
                this.loadContentLibrary();
                this.simulateProgress();
            },
            methods: {
                async generateVideo() {
                    if (!this.videoForm.prompt.trim()) {
                        alert('Please enter a prompt');
                        return;
                    }
                    
                    this.generating = true;
                    this.progress = 0;
                    this.generatedVideo = null;
                    
                    try {
                        const response = await axios.post('/api/admin/generate-video', this.videoForm);
                        
                        this.generatedVideo = response.data;
                        this.loadContentLibrary();
                        this.loadAnalytics();
                        
                    } catch (error) {
                        console.error('Video generation failed:', error);
                        alert('Video generation failed. Please try again.');
                    } finally {
                        this.generating = false;
                        this.progress = 0;
                    }
                },
                
                async generateAudio() {
                    if (!this.audioForm.text.trim()) {
                        alert('Please enter text to convert to speech');
                        return;
                    }
                    
                    this.generatingAudio = true;
                    
                    try {
                        const response = await axios.post('/api/admin/generate-audio', this.audioForm);
                        
                        // Play the generated audio
                        const audio = new Audio(response.data.audio_url);
                        audio.play();
                        
                        this.loadContentLibrary();
                        
                    } catch (error) {
                        console.error('Audio generation failed:', error);
                        alert('Audio generation failed. Please try again.');
                    } finally {
                        this.generatingAudio = false;
                    }
                },
                
                async loadAnalytics() {
                    try {
                        const response = await axios.get('/api/admin/analytics');
                        this.analytics = response.data;
                    } catch (error) {
                        console.error('Failed to load analytics:', error);
                    }
                },
                
                async loadContentLibrary() {
                    try {
                        const response = await axios.get('/api/admin/content-library');
                        this.contentLibrary = response.data.content;
                    } catch (error) {
                        console.error('Failed to load content library:', error);
                    }
                },
                
                simulateProgress() {
                    if (this.generating) {
                        this.progress += Math.random() * 10;
                        if (this.progress < 90) {
                            setTimeout(() => this.simulateProgress(), 500);
                        }
                    }
                }
            }
        }).mount('#app');
    </script>
</body>
</html>
